"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileValidator = void 0;
const handler_1 = require("../handler");
const error_1 = require("../../error");
class FileValidator extends handler_1.AbstractHandler {
    config;
    constructor(config) {
        super();
        this.config = config;
    }
    handle = async (data) => {
        const missingFiles = [];
        // req.body contains the files
        if (this.config !== 'any')
            for (const name of this.config)
                if (!data.file[name])
                    missingFiles.push(name);
        if (missingFiles.length > 0)
            return (0, error_1.httpError)(error_1.StatusCode.BAD_REQUEST, "You didn't send all required files", {
                missingFiles,
            });
        return super.handle(data);
    };
}
exports.FileValidator = FileValidator;
//# sourceMappingURL=file-validator.js.map